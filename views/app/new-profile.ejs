<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      name="description"
      content="Join Vibrer's prelaunch and be the first to experience a revolutionary music platform. Connect, discover, and engage with artists and music enthusiasts worldwide."
    />
    <meta
      name="keywords"
      content="music platform, prelaunch, music community, music discovery, artist connection, music enthusiasts"
    />
    <%- include('../partials/head'); %>
    <link
      href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/public/style/app.css" />
    <style>
      :root {
        --dd-radius: 4px !important;
        --dd-shadow: 0 0 2.5em rgba(0, 0, 0, 0.1);
        --dd-overlay: rgba(0, 0, 0, 0.75);
        --dd-background: #ffffff;
        --dd-text1: #080813;
        --dd-text2: #ffffff;
        --dd-primary: #f32377;
        --dd-gradient: linear-gradient(45deg, #fb6580, #f32377) !important;
        --dd-monthBackground: var(--dd-gradient);
        --dd-monthText: var(--dd-text2);
        --dd-monthBorder: transparent;
        --dd-confirmButtonBackground: var(--dd-gradient);
        --dd-confirmButtonText: var(--dd-text2);
        --dd-selectedBackground: var(--dd-gradient);
        --dd-selectedText: var(--dd-text2);
      }
      .dd__dropdown:not(.dd-inline).dd-shown {
        transform: translateY(-5%) translateX(-50%) !important;
      }
    </style>
  </head>

  <body class="body-dark">
    <!-- Loader -->
    <%- include('../partials/loader'); %>
    <main>
      <section class="edit-profile layout">
        <div class="profile_wrapper">
          <div class="logo">
            <img src="/public/images/vibrer_light_logo.svg" alt="Logo" />
          </div>

          <form class="form" id="stepForm" action="#" method="post">
            <!-- Step 1 -->
            <div class="step step-1">
              <div class="dfcolac mt-4 mb-4">
                <div class="title">Personal Info</div>
                <div class="sub">Add your information</div>
              </div>
              <div class="grid-2-sm">
                <div>
                  <input
                    type="text"
                    id="fname"
                    placeholder="First name *"
                    required
                    name="fName"
                  />
                </div>

                <div>
                  <input
                    type="text"
                    id="lname"
                    placeholder="Last name *"
                    required
                  />
                </div>
                <div class="custom-select dfac" id="gender-opt">
                  <div class="placeholder">Gender *</div>
                  <div class="options">
                    <div class="option" value="male">Male</div>
                    <div class="option" value="female">Female</div>
                  </div>
                  <input type="hidden" name="gender" value="" required />
                </div>
                <div class="date-input">
                  <input
                    type="date"
                    name="dob"
                    id="dob"
                    placeholder="Date of Birth *"
                  />
                </div>
                <div>
                  <input type="text" id="city" placeholder="City *" required />
                </div>
                <div>
                  <input
                    type="text"
                    id="country"
                    placeholder="Country *"
                    required
                  />
                </div>
              </div>
              <div class="dfjcfe ac g-3 mt-4">
                <button
                  type="button"
                  data-action="next"
                  class="btn btn-primary next-btn"
                >
                  Next
                </button>
              </div>
            </div>

            <!-- Step 2 -->
            <div class="step step-2">
              <div class="dfcolac mt-4 mb-4">
                <div class="title">Account Info</div>
                <div class="sub">Complete your information</div>
              </div>
              <div class="custom-select-wrapper mb-4">
                <div class="custom-check-select dfac" id="artists">
                  <div class="placeholder">I am a? *</div>
                  <div class="check-options">
                    <div class="check-list grid-2-sm">
                      <label class="checkbox-container">
                        Singer
                        <input type="checkbox" id="Singer" value="Singer" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Songwriter
                        <input
                          type="checkbox"
                          id="Songwriter"
                          value="Songwriter"
                        />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Music Producer
                        <input
                          type="checkbox"
                          id="Producer"
                          value="Music Producer"
                        />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Dancer
                        <input type="checkbox" id="Musician" value="Dancer" />
                        <span class="checkmark"></span>
                      </label>
                    </div>
                    <div class="divider w-100 mt-4"></div>
                    <div class="ccs-foter dfjcfe">
                      <button class="btn btn-primary h-auto close-options">
                        Done
                      </button>
                    </div>
                  </div>
                </div>
                <div class="selected-items"></div>
              </div>

              <div class="custom-select-wrapper">
                <div class="custom-check-select dfac" id="genre">
                  <div class="placeholder">Genre *</div>
                  <div class="check-options">
                    <div class="check-list grid-2-sm">
                      <label class="checkbox-container">
                        Pop
                        <input type="checkbox" id="Pop" value="Pop" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Rock
                        <input type="checkbox" id="Rock" value="Rock" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Jazz
                        <input type="checkbox" id="Jazz" value="Jazz" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Blues
                        <input type="checkbox" id="Blues" value="Blues" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Classical
                        <input
                          type="checkbox"
                          id="Classical"
                          value="Classical"
                        />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Country
                        <input type="checkbox" id="Country" value="Country" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Reggae
                        <input type="checkbox" id="Reggae" value="Reggae" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Hip Hop
                        <input type="checkbox" id="HipHop" value="Hip Hop" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Heavy Metal
                        <input
                          type="checkbox"
                          id="HeavyMetal"
                          value="Heavy Metal"
                        />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Punk
                        <input type="checkbox" id="Punk" value="Punk" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Electronic Dance Music
                        <input
                          type="checkbox"
                          id="EDM"
                          value="Electronic Dance Music"
                        />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Rhythm and Blues
                        <input
                          type="checkbox"
                          id="RandB"
                          value="Rhythm and Blues"
                        />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Soul
                        <input type="checkbox" id="Soul" value="Soul" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Funk
                        <input type="checkbox" id="Funk" value="Funk" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Folk
                        <input type="checkbox" id="Folk" value="Folk" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Disco
                        <input type="checkbox" id="Disco" value="Disco" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Latin
                        <input type="checkbox" id="Latin" value="Latin" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Indie Rock
                        <input
                          type="checkbox"
                          id="IndieRock"
                          value="Indie Rock"
                        />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Techno
                        <input type="checkbox" id="Techno" value="Techno" />
                        <span class="checkmark"></span>
                      </label>
                      <label class="checkbox-container">
                        Alternative Rock
                        <input
                          type="checkbox"
                          id="AlternativeRock"
                          value="Alternative Rock"
                        />
                        <span class="checkmark"></span>
                      </label>
                    </div>
                    <div class="divider w-100 mt-4"></div>
                    <div class="ccs-foter dfjcfe">
                      <button class="btn btn-primary h-auto close-options">
                        Done
                      </button>
                    </div>
                  </div>
                </div>
                <div class="selected-items"></div>
              </div>

              <div class="dfjcb ac g-3 mt-4">
                <button class="btn btn-outlined" data-action="back">
                  Back
                </button>
                <button
                  type="button"
                  class="btn btn-primary next-btn"
                  data-action="next"
                >
                  Next
                </button>
              </div>
            </div>
            <!-- Step 3 -->
            <div class="step step-3">
              <div class="dfcolac mt-4 mb-4">
                <div class="title">Profile Media</div>
                <div class="sub">Complete your profile</div>
              </div>
              <div class="avatar-upload">
                <input type="file" id="avatar" />
              </div>
              <div class="small text-center mt-1 mb-4">
                Choose profile photo
              </div>
              <div class="cover-upload">
                <div class="cover-holder">
                  <div class="label mb-0">
                    Add a cover photo <span>Upload</span>
                  </div>
                </div>
                <input type="file" id="coverImg" />
              </div>
              <div class="small mt-1">
                To optimally fit, use an image of 800x300 pixels.
              </div>
              <div class="dfjcb ac g-3 mt-4">
                <button class="btn btn-outlined" data-action="back">
                  Back
                </button>
                <button
                  type="button"
                  class="btn btn-primary next-btn"
                  data-action="next"
                >
                  Next
                </button>
              </div>
            </div>

            <!-- Step 4 -->
            <div class="step step-4">
              <div class="dfcolac mt-4 mb-4">
                <div class="title">Profile Info</div>
                <div class="sub">Complete final step</div>
              </div>

              <div class="mb-4">
                <div id="bio" style="height: auto; min-height: 100px"></div>
              </div>

              <div class="mb-4">
                <input type="text" placeholder="YouTube" />
              </div>
              <div class="mb-4">
                <input type="text" placeholder="Instagram" />
              </div>
              <div class="mb-4">
                <input type="text" placeholder="Facebook" />
              </div>
              <div class="mb-4">
                <input type="text" placeholder="Website" />
              </div>

              <div class="dfjcb ac g-3 mt-4">
                <button class="btn btn-outlined" data-action="back">
                  Back
                </button>
                <button type="submit" class="btn btn-primary next-btn">
                  Finish
                </button>
              </div>
            </div>
          </form>
        </div>
      </section>
    </main>
    <!-- javascript -->
    <script src="/public/js/cookieBanner.js"></script>
    <script src="/public/js/general.js"></script>
    <script src="/public/js/select.js"></script>
    <script src="/public/js/check-select.js"></script>
    <script src="/public/plugins/datedropper/datedropper-javascript.js"></script>
    <script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <script>
      function toForgotPass() {
        window.location.href = "/forgot-password";
      }
    </script>
    <script>
      window.addEventListener("DOMContentLoaded", function () {
        function initCoverUpload(coverUpload) {
          const coverHolder = coverUpload.querySelector(".cover-holder");
          const fileInput = coverUpload.querySelector('input[type="file"]');
          const allowedExtensions = /(\.jpg|\.jpeg|\.png|\.heic|\.heif)$/i;

          coverHolder.addEventListener("click", function () {
            fileInput.click();
          });

          fileInput.addEventListener("change", function (e) {
            const file = e.target.files[0];
            if (!allowedExtensions.exec(file.name)) {
              const alertDiv = document.createElement("div");
              alertDiv.classList.add("form-alert");
              alertDiv.classList.add("error");
              alertDiv.classList.add("text-center");
              alertDiv.classList.add("mb-2");
              alertDiv.textContent =
                "Invalid file type. Please select an image file from this formats (jpg, jpeg, png, gif, heic, heif).";
              coverUpload.parentNode.insertBefore(alertDiv, coverUpload);
              return;
            }

            const reader = new FileReader();
            reader.onload = function (e) {
              coverHolder.innerHTML = '<div class="loader">Loading...</div>';
              setTimeout(function () {
                coverHolder.style.backgroundImage = `url(${e.target.result})`;
                coverHolder.innerHTML =
                  '<div class="label mb-0">Add a cover photo <span>Change</span></div>';
              }, 1000); // simulate loading time for image
            };
            reader.readAsDataURL(file);
          });
        }

        const coverUploads = document.querySelectorAll(".cover-upload");
        coverUploads.forEach((coverUpload) => {
          initCoverUpload(coverUpload);
        });
      });
    </script>
    <script>
      (function () {
        const avatarUpload = document.querySelector(".avatar-upload");

        const allowedExtensions = ["jpg", "jpeg", "png", "gif", "heic", "heif"];

        const avatarError = document.createElement("div");
        avatarError.classList.add(
          "form-alerts",
          "error",
          "text-center",
          "mb-2"
        );
        avatarUpload.parentNode.insertBefore(avatarError, avatarUpload);

        const avatarHolder = document.createElement("div");
        avatarHolder.classList.add("avatar-holder");

        const avatarPreview = document.createElement("img");
        avatarPreview.src = "/public/images/icons/camera.svg";
        avatarPreview.alt = "Avatar";
        avatarPreview.id = "avatarPreview";
        avatarHolder.appendChild(avatarPreview);

        const changeAvatar = document.createElement("div");
        changeAvatar.classList.add("change-avatar");
        changeAvatar.innerText = "...";
        avatarHolder.appendChild(changeAvatar);

        avatarUpload.appendChild(avatarHolder);

        const fileInput = document.createElement("input");
        fileInput.type = "file";
        fileInput.id = "avatar";
        avatarUpload.appendChild(fileInput);

        const loader = document.createElement("div");
        loader.classList.add("loader");
        loader.style.display = "none";
        loader.innerText = "Loading...";
        avatarHolder.appendChild(loader);

        avatarHolder.addEventListener("click", function () {
          fileInput.click();
        });

        fileInput.addEventListener("change", function () {
          const file = this.files[0];
          if (file) {
            const fileExtension = file.name.split(".").pop().toLowerCase();
            if (
              !file.type.startsWith("image/") ||
              !allowedExtensions.includes(fileExtension)
            ) {
              avatarError.innerHTML =
                "Invalid file type. Please select an image file from this formats </br> (jpg, jpeg, png, gif, heic, heif).";
              return;
            }

            avatarError.innerHTML = "";

            const reader = new FileReader();

            // Show loader and hide preview when reading starts
            loader.style.display = "block";
            avatarPreview.style.display = "none";

            reader.onloadend = function () {
              // Hide loader when reading ends
              loader.style.display = "none";

              avatarHolder.style.backgroundImage =
                'url("' + reader.result + '")';
              changeAvatar.style.display = "block";
            };

            reader.readAsDataURL(file);
          }
        });
      })();
    </script>

    <script>
      //   date

      function calculateMaxYear() {
        const currentDate = new Date();
        const maxYear = currentDate.getFullYear() - 14;
        return maxYear;
      }

      const maxYear = calculateMaxYear();

      new dateDropper({
        selector: "#dob",
        format: "dd/mm/y",
        lang: "en",
        showArrowsOnHover: true,
        overlay: false,
        expandable: false,
        expandedOnly: false,
        doubleView: false,
        startFromMonday: false,
        maxYear: maxYear.toString(),
        minYear: "1900",
        // jump: "10",
        range: false,
      });

      var quill = new Quill("#bio", {
        modules: {
          toolbar: false, // This hides the toolbar
        },
        placeholder: "Bio *",
        theme: "snow",
      });
    </script>
    <script>
      window.addEventListener("DOMContentLoaded", (event) => {
        // Get all steps, buttons, and inputs
        const steps = Array.from(document.querySelectorAll(".step"));
        const nextButtons = Array.from(
          document.querySelectorAll('button[data-action="next"]')
        );
        const backButtons = Array.from(
          document.querySelectorAll('button[data-action="back"]')
        );
        const inputs = Array.from(document.querySelectorAll("input[required]"));

        // Initial setup - show first step, hide others
        steps.forEach((step, index) => {
          step.style.display = index === 0 ? "block" : "none";
        });

        // Functionality for "next" buttons
        nextButtons.forEach((button, index) => {
          button.addEventListener("click", () => {
            steps[index].style.display = "none";
            alert("Next");
            steps[index + 1].style.display = "block";
          });
        });

        // Functionality for "back" buttons
        backButtons.forEach((button, index) => {
          button.addEventListener("click", () => {
            steps[index + 1].style.display = "none";
            steps[index].style.display = "block";
          });
        });

        // Check input fields in current step and enable the next button if all required fields are filled
        inputs.forEach((input) => {
          input.addEventListener("input", (e) => {
            const step = e.target.closest(".step");
            const nextButton = step.querySelector('button[data-action="next"]');
            const requiredInputs = Array.from(
              step.querySelectorAll("input[required]")
            );
            nextButton.disabled = requiredInputs.every(
              (input) => input.value !== ""
            );
          });
        });

        // Stop form from being submitted normally
        document.querySelector("#stepForm").addEventListener("submit", (e) => {
          e.preventDefault();
          // ... add your form validation and submission logic here ...
        });
      });
    </script>
  </body>
</html>
